{% extends "core/base.html" %}

{% load account socialaccount %}


{% block content %}
  <h1 class="text-center header">Sign In</h1>

  {% get_providers as socialaccount_providers %}

  {% if socialaccount_providers %}
    <p>
      Please sign in with one of your existing third party accounts.
      Or, <a href="{{ signup_url }}">sign up</a> for a {{ site_name }}
      account and sign in below:
    </p>

    <div class="socialaccount_ballot">
      <ul class="socialaccount_providers">
        {% include "socialaccount/snippets/provider_list.html" with process="login" %}
      </ul>

      or
    </div>

    {% include "socialaccount/snippets/login_extra.html" %}
  {% endif %}

  <div class="col-md-6 col-md-offset-3">
    {% if form.errors %}
      <div class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-exclamation-sign"></span>
        Your username and password didn't match. Please try again.
      </div>
    {% endif %}

    <form class="login" method="POST" action="{% url 'account_login' %}">
      {% csrf_token %}

      <div class="form-group">
        <label for="username-input">Username</label>
        <input id="username-input" autofocus placeholder="Username"
          name="login" class="form-control" type="text"
          value="{{ form.username.value|default_if_none:"" }}">
      </div>

      <div class="form-group">
        <label for="password-input">Password</label>
        <input id="password-input" placeholder="Password"
          name="password" class="form-control" type="password"
          value="{{ form.password.value|default_if_none:"" }}">
      </div>

      {% if redirect_field_value %}
        <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
      {% endif %}

      <button class="btn btn-primary center-block" type="submit">Sign In</button>
    </form>
  </div>
{% endblock %}
